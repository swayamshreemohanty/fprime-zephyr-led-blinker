# F Prime C++ Dependencies
CONFIG_CPP=y
CONFIG_NEWLIB_LIBC=y
CONFIG_FPRIME=y

CONFIG_UART_INTERRUPT_DRIVEN=y

# Serial and I/O
# Disable console output to prevent UART interference with F' communication
CONFIG_CONSOLE=n
CONFIG_UART_CONSOLE=n
CONFIG_BOOT_BANNER=n
CONFIG_EARLY_CONSOLE=n
# CONFIG_UART_ASYNC_API=y  # Requires SERIAL_SUPPORT_ASYNC
CONFIG_SERIAL=y
CONFIG_GPIO=y
CONFIG_PWM=y
CONFIG_I2C=y
CONFIG_SPI=y
CONFIG_PINCTRL=y
CONFIG_ASSERT=y

# Enable floating-point units (FPUs)
CONFIG_FPU=y
CONFIG_FPU_SHARING=y

# Required for k_malloc
CONFIG_KERNEL_MEM_POOL=y
CONFIG_HEAP_MEM_POOL_SIZE=524288
CONFIG_MAIN_STACK_SIZE=131072
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=8192

# Ring Buffer
CONFIG_RING_BUFFER=y

# Required for time syscalls
# CONFIG_POSIX_CLOCK=y  # Removed in Zephyr 4.x
CONFIG_POSIX_API=y

# Multithreading
# Zephyr refuses DYNAMIC_OBJECTS without userspace; disable to avoid Kconfig aborts
CONFIG_DYNAMIC_OBJECTS=n
CONFIG_DYNAMIC_THREAD=y
CONFIG_DYNAMIC_THREAD_ALLOC=y
CONFIG_THREAD_STACK_INFO=y
# NOTE: F' Zephyr task delegate stores a Zephyr `k_thread` object. Enabling userspace
# increases `k_thread` size and can exceed F' `FW_TASK_HANDLE_MAX_SIZE` (280), causing
# a compile-time failure in `Os/Delegate.hpp`.
# CONFIG_USERSPACE is not set

# Diagnostics: catch stack overflow / report usage
CONFIG_INIT_STACKS=y
# STACK_SENTINEL depends on !MPU_STACK_GUARD and fails for this board; leave it off
CONFIG_STACK_SENTINEL=n
CONFIG_THREAD_NAME=y

# Set MPU to allow write accesses to flash memory.
# This is required by the flash driver to be able
# to write to the internal flash.
# CONFIG_MPU_ALLOW_FLASH_WRITE=y
# CONFIG_FLASH=y
# CONFIG_FLASH_MAP=y
# CONFIG_FLASH_PAGE_LAYOUT=y

# Disable logging for production to avoid UART interference
CONFIG_LOG=n
CONFIG_LOG_PRINTK=n
CONFIG_PRINTK=n

# Enable runtime error detection
CONFIG_RUNTIME_ERROR_CHECKS=y
CONFIG_DEBUG=y

# Enable thread monitoring
CONFIG_THREAD_MONITOR=y

# Enable assertions
CONFIG_ASSERT=y
CONFIG_ASSERT_VERBOSE=y
