# F Prime C++ Dependencies
CONFIG_CPP=y
CONFIG_NEWLIB_LIBC=y
CONFIG_REQUIRES_FULL_LIBCPP=y
CONFIG_GLIBCXX_LIBCPP=y
# Disable heavy C++ features to keep footprint small
CONFIG_CPP_EXCEPTIONS=n
CONFIG_CPP_RTTI=n

# Native USB (disabled for compatibility with Zephyr 4.x)
# CONFIG_USB_DEVICE_STACK=y
# CONFIG_USB_CDC_ACM=y
# CONFIG_USB_DEVICE_PID=0x0110
# CONFIG_USB_DEVICE_INITIALIZE_AT_BOOT=y
CONFIG_UART_INTERRUPT_DRIVEN=y 

# Serial and I/O
# Disable UART console to free USART3 for F-Prime communication only
CONFIG_CONSOLE=n
CONFIG_UART_CONSOLE=n
# CONFIG_UART_ASYNC_API=y  # Requires SERIAL_SUPPORT_ASYNC
CONFIG_SERIAL=y
CONFIG_GPIO=y
CONFIG_PWM=y
CONFIG_I2C=y
CONFIG_SPI=y
CONFIG_PINCTRL=y
# Disable asserts to avoid needing to implement assert handlers
CONFIG_ASSERT=n

# Enable floating-point units (FPUs)
CONFIG_FPU=y
CONFIG_FPU_SHARING=y

# Required for k_malloc
CONFIG_KERNEL_MEM_POOL=y
CONFIG_HEAP_MEM_POOL_SIZE=16384
CONFIG_NEWLIB_LIBC_MIN_REQUIRED_HEAP_SIZE=4096
# Reduce main stack to fit RAM budget
CONFIG_MAIN_STACK_SIZE=4096
# Keep interrupt/workqueue stacks modest to fit RAM
CONFIG_ISR_STACK_SIZE=2048
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=1024

# Ring Buffer
CONFIG_RING_BUFFER=y

# Required for time syscalls
# CONFIG_POSIX_CLOCK=y  # Removed in newer Zephyr
CONFIG_POSIX_API=y

# Multithreading
CONFIG_THREAD_STACK_INFO=y
# Disable userspace - it requires additional support functions
# CONFIG_USERSPACE=y

# Set MPU to allow write accesses to flash memory.
# This is required by the flash driver to be able
# to write to the internal flash.
# CONFIG_MPU_ALLOW_FLASH_WRITE=y
# CONFIG_FLASH=y
# CONFIG_FLASH_MAP=y
# CONFIG_FLASH_PAGE_LAYOUT=y

# CONFIG_LOG=y
# CONFIG_LOG_MODE_MINIMAL=y

# CONFIG_FILE_SYSTEM=y
# CONFIG_FILE_SYSTEM_LITTLEFS=y

# CONFIG_APP_WIPE_STORAGE=y

# CONFIG_EVENTS=y

# CONFIG_THREAD_NAME=y
# CONFIG_THREAD_ANALYZER=y
# CONFIG_THREAD_ANALYZER_USE_PRINTK=y
# CONFIG_THREAD_ANALYZER_AUTO=y
# CONFIG_THREAD_ANALYZER_AUTO_INTERVAL=60
